<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[记第一次与传销的正面接触]]></title>
      <url>/2017/06/24/%E8%AE%B0%E7%AC%AC%E4%B8%80%E6%AC%A1%E4%B8%8E%E4%BC%A0%E9%94%80%E7%9A%84%E6%AD%A3%E9%9D%A2%E6%8E%A5%E8%A7%A6/</url>
      <content type="html"><![CDATA[<blockquote>
<p><em><strong>传销是指组织者发展人员，通过对被发展人员以其直接或者间接发展的人员数量或者业绩为依据计算和给付报酬，或者要求被发展人员以交纳一定费用为条件取得加入资格等方式获得财富的违法行为。</strong></em></p>
<p><em><strong> –摘自百度百科</strong></em></p>
</blockquote>
<p><strong>上月末，好朋友告诉我说，他弟弟被传销了，发信息向他求救，打电话向廊坊报警，得到的回复是必须要到当地才可以报警立案，随后在他家乡和杭州报警询问，得到的结果都是说要到当地报警。于是马上一起去了河北廊坊，去寻求警方的帮助，然而后几天的经历才发现，’人民的名义’中那些正气的警察真的只是在电视中才会出现的，至少说我们是没有遇到的。</strong><br><a id="more"></a> </p>
<hr>
<p>2017-07-29 10:01:55</p>
<p>一更，大约一个月之前，A 再次求救，说是现在已经领悟了，然后希望去救他，然后 A 的妈妈，去了廊坊，在当地警方一直不愿意去找的情况下，然后死磕派出所，然后虽然最终去找，但是并不在那里。</p>
<p>A 是通过翻墙逃跑（翻墙是那个传销点的老大让他翻墙走，原因是怕警察找到这个点），然后出来的。</p>
<p>最终得救。</p>
<p>以上。</p>
<hr>
<p>以下称朋友的弟弟为 A 。</p>
<ul>
<li>5.31 上午到达河北廊坊。<br>到廊坊后，第一件事就是去廊坊市公安局报案，然后却被拦在市公安局门口不让进，然后保安态度恶劣，让我们打 110 报案，然后我们就在市公安局门口打 110 报案，然后电话是廊坊市新开路派出所接的，然后让我们到哪里去，我们问为什么市公安局不让进，为什么不能去公安局报案，要去派出所，得到的回复是，市公安局是他们所在的派出所管辖的辖区，市公安局不接待访客，让我们去派出所。</li>
</ul>
<p>虽然有点生气，但是为了营救 A，还是去了派出所，然后到达派出所后，进行身份登记后，我们把情况都告诉他们了，说了我们现在有定位，有求救信息，有电话可以进行定位，然后询问能不能立案，得到的回复却依然是不能，民警说，立案需要取证，需要进行侦查，然后只能尽力给我们协助，但不会负责到底，有案件管辖权的问题，然后我们又说，举报传销可不可以立案，民警依然是说不能，需要取证才可以。</p>
<p>然后另一个民警，抽着烟翘着二郎腿，和我们说，可以在走失地报人口失踪，我们讲因为我们现在有时候还可以联系到 A，所以报不了人口失踪，又因为我们知道 A 在廊坊，而且报警也是让我们来这边才会受理，我们才来的。</p>
<p>然后民警问我们现在知道的位置，然后说位置属于北旺派出所，让我们去那边。而且还问我们为什么会接待我们，我们回答，是因为我们报了案，他说，是因为我们在市公安局报了案，属于他们辖区，他们才接待的。</p>
<p>之后我们打车去北旺派出所，觉得这些民警都不在乎，不在意这事情。</p>
<p>到达北旺派出所后，被拦在了接待室，只能在接待室进行报案，和这个接待的民警说了这些情况，这个民警说我们来之前不久，也有一个人来报案，也是关于传销，是他妹妹被传销了，然后说了些廊坊有几大传销窝点，打击了好几次了，然后让我们留下了三分照片材料，说会给三个班都说一下，然后会把信息给领导，排警察进行摸查，确定了位置就会去取缔，然后让我们等消息。</p>
<p><strong>第一天感觉并不好，觉得警察都不在意，对于亲属来说这是件天大的事情，然而对于他们来讲，感觉就是件司空见惯的事情，给人的感觉就是敷衍过去就可以了。</strong></p>
<ul>
<li>6.1 日第二天， 绝望的一天，<strong>比坏人更可恨的是，知道却不作为的警察。</strong><br>上午去广阳区工商局进行举报传销，然后到工商局的经检大队进行了举报传销，然后把已知的信息提供了，然后随口问了下市公安局可不可以进入，得到的答案居然是可以。</li>
</ul>
<p>随后我们又去廊坊市政府，想咨询下市公安局能不能进入，按我们的想法是市公安局作为一个政府机构，为什么不能接收群众的报案，哪怕是接收后分派到各辖区，然而询问市政府门前的民警们，也没有得到明确的答案，到底能不能进入，我们把昨天报案传销的经历告诉他们，他们讲如果有不作为的警察，可以去督察局举报他们。<br>再次给了我们一个希望。</p>
<p>下午去派出所询问案件情况，两点半警察才上班，等到两点半后，去询问的结果居然是，他不知道，说是昨天的班没有告诉他，然后我们讲昨天留了三分材料，他说昨天的班没有和他交接，可能是和别人，然后让他问一下，也没有问，就说不知道，还说有情况会和我们联系，搞笑，连案情都不知道，怎么和我们联系，之后，我们在北旺派出所的一阴凉处准备给督察局反应，但是却被这个接待的民警给赶出派出所，让我们出去打。</p>
<p>打广阳区电话，说要举报派出所，问举报电话时，接线员说不知道，给挂断了，再次打，告知了电话，却打了十几二十个都没人接，<strong>有点生气又绝望，警察不管，举报没人接，这就是真实的派出所吗。</strong></p>
<p>后来又遇到四个人报案，同事被传销，然后三个同事和他父亲来报案，之后在那边聊了会，他们的报案路线和我们的一样。去市公安局报案不让进，转到新开路派出所，派出所再转到当地辖区。</p>
<p>他们说已经去过大枣林看过，我们说了我们现在的情况，定位什么的都给他们看了，然后说想我们再一起去一下，但是他们却不想去了，也没有告诉我们多少信息，一直再问我们，同样的受害者却还不想相互帮助。</p>
<p>再离派出所十几米的地方，有一个照相馆，传销报案需要把当事人照片打印出来，然后照相馆的人会给你个电话，是当地黑社会捞人的电话，给钱就可以把人捞出来。</p>
<p>那个人的父亲好想是要通过这种方法来捞人。</p>
<p>之后我们打算自己去看一下，没有找到好心的当地人，然后就打了一辆出租车去看，出租车司机知道我们的目的后，说他一侄女也被传销了，后来他去救的。我们跟着定位走，很轻易地就找到了定位上的地方，果然里面有一伙传销，但是却被发现了，打草惊蛇，本想让司机大哥帮助我们下，一起进去看看，但是司机不想去，我们只能冒着他们逃走的风险，去派出所报案。</p>
<p>但是，遇到的居然是这种事情。</p>
<p><strong>前段时间刚看完人民的名义，侯亮平带领几辆警车闯红灯，一路到机场拦截欧阳靖，我们本想，就算不是这样，第一时间赶到那里就可以了</strong>。</p>
<p>但是。</p>
<p>去派出所报案，民警听了，一点不着急，然后不急不忙的去开警车和我们一起去，然后，他们居然要先去中途办一件民事纠纷！！！因为他们之前没时间去！！！</p>
<p>里面有三个警察，两个快退休的了，一个年轻一点，就这三个人，简直是民警的耻辱，我们说能不能先处理我们的案件，传销，A 的人身安全，去晚了就跑了，他们说跑不了，能跑到那里。我们说这是关系到 A 人身安全的问题，那个年轻的警察说，他这个也是人命关天，万一纠纷打架打死人呢。</p>
<p>？？？</p>
<p>特生气，然后他们到了后，下车后，我们两个想自己去，但是警车被锁住了，我们开不了，我们一直砸门喊他们开，过了一会才开，我们两个马上出去就走，他们告诉我们，处理完了。</p>
<p>我TM，这就是你们的案情紧急。</p>
<p>然后<strong>到那里，人跑了，留下一个人，一看就是放风的，这么简单的事情，警察居然不管不问，我们问那个人问题，警察不让我们问，我们让那个人那身份证，证明他身份，警察不让我们管，我们想让警察把那个人带回派出所询问，警察不带，什么都不问，不管。</strong></p>
<p>知道他们的处理方式吗。<strong>就是拿锄头把那屋子里的水缸锅给砸了，呵呵，这就是办案方式？</strong></p>
<p><strong>比坏人更可恨的是，知道还不作为的警察；知道是传销，却还不放在心上；人跑了，知道人说的是谎话，却连问都不问，敷衍了事的无作为；是一天天混吃等死，给警察拉低形象的混子。</strong></p>
<p>最终无功而返，反而打草惊蛇。</p>
<ul>
<li>6.2 日，最后一天<br><strong>在此要特别感谢以为朋友的老乡，做自媒体的老乡，我们在去廊坊之前微博发过很多，联系很多微博大V，自媒体，回应的寥寥无几。这个老乡还是蛮好的，以个人身份给我们建议，给我们提供帮助，再次感谢</strong>。</li>
</ul>
<p>这天见到了他本人，聊了下关于传销的情况，廊坊这边很多很多。</p>
<p>他也讲说把这件事和上面反应过，但是得到的回复是，现在廊坊在办书博会，不允许报道不好的事情。</p>
<p>还有一件，当时我们看来很可怕的事情，6.1 日晚上，我朋友接到一短信，问我们是不是再找人，捞人可以找他，当时看到的时候，天呐，觉得廊坊这边太危险了，朋友电话除了在派出所和工商局留下过，其他就是滴滴打车时司机打过。</p>
<p>据这个老乡讲，发短信这个是当地黑社会的。因为老乡L多次接触过传销，也救出来了一些人，他猜测捞人这么快的原因，一种可能是传销人员，然后他拉进去好多人，到一定的位置后，然后出来转行做这个，另一个是传销去找寻当地黑社会的保护，然后才会这么快找到。</p>
<p>之后，去广阳区督察局，举报昨天遇到的民警的事情，因为我们都有录音，查证据我们也有，然而我们又想多了。<br>1. 第一件是昨天去询问案情，民警的态度及处理方式，然后督查室只是记下来了。</p>
<p>2. 第二件就是去传销窝点的事情，然后我们说警察在中途去处理了民事纠纷，没有第一时间去窝点，我们讲可以分下轻重去执行，<br>得到的回应是，我们<strong>去派出所报案传销，派出所只能说协助，我们属于求助，然后其他人报案是属于派出所的案件，优先级比求助类高，派出所警力不够，只能按顺序来</strong>。<br><strong>然后说如果没有出警，我们可以向上级反应下，但是已经出警了，他们也没办法</strong></p>
<p>3. 第三件照相馆会给人捞人的电话，然后这个得到的回应是，有很多群众反应这个情况，但是这个事情在法律上并没有明确的规定，所以也很难监管。</p>
<p>4. 第四件事情问现在的传销能不能立案，得到的回应是去派出所报案，现在的传销都是求助类，还没有上升到一定的高度，就算抓到一个窝点，属于传销人员下线的，也处罚不了，只能记录他们身份，然后询问回不回家，就没有其他的了。</p>
<p>然后说他们新来的局长很重视这块，正在狠抓传销，北旺是重点区域。</p>
<p>然后，反应完，也感觉并没有什么用。</p>
<p>之后去火车站，打算回去。</p>
<p>然后我们想到要不要骗A说，朋友自己来了这边，看他过不过来，开始不接电话，后来，说来。</p>
<p>然后我们去求助火车站的警察，希望 A 来了后，可以帮忙一起抓住。</p>
<p>后来人来了，然后也抓住他了。</p>
<p>然后朋友和开始和他讲，不听。</p>
<p>他说就算是带他回去，他也会再回来。</p>
<p>然后我们打算强制带他回去，然后在火车站进站时，然后..我们就打起来了..</p>
<blockquote>
<p><em><strong>中国式传销 是虚假的公司，虚构的产品，什么都是空的，就只是让你拉人头，从入会费或者加盟费中提取少量提成。或者控制人身自由，没收财物，让你无法与外界联系，天天学习那些传销培训教材，让你学会怎么骗人，然后列名单、电话或书信邀约、摊牌、跟进、直至以各种方式交齐入会费或者加盟费。</strong></em></p>
<p><em><strong>现在的中国式传销是建立在精神控制的基础上，即让你通过他们的传销培训洗脑后自发的去组织进行传销；另外一些会控制你的人身自由，没收所有物品，并且通过暴力使你认可这些谎言。</strong></em></p>
<p><em><strong>摘自 百度百科 传销的发展形成</strong></em><br>后来朋友一直在和他讲，A 也讲了一些事情，初中的时候被人打，回家又没敢讲，最终导致不读书了。</p>
</blockquote>
<p>然后 A 说是想为家里好，但是不承认自己做的是错的路，一直说不回去，回去也会回来，说之前求助是因为觉得自己受不了那苦，然后又说不回去是他不受苦将来家里就会受苦，然后我们讲，受苦但是要受对方向，然后我们告诉他方向错误了，他不信也不听，然后怎么说都不听，怎么着怎么着。</p>
<p>然后后来朋友在和 A 一直讲，但是 A 就是不回去，说自己也搜过传销那些事情，但是他没有骗人去，所以才没有钱，是觉得在哪可以学到东西。</p>
<p>然后后来朋友让他回家看下妈妈，他说会回去但不是现在。</p>
<p>讲要是强行带他回去，他回去看一下，然后再回来。然后说一些不要干涉他之类的话，然后还说要和朋友断绝关系，去法院签断绝关系责任书，</p>
<p>我们两个，商量，既然他要自己选，就让他自己选，回家看一下他妈妈，还是不回去。</p>
<p>他选择了不回去，说自己的选择，你们拦住没有用。</p>
<p>我们两个也决定既然他那么不肯回去，就给他自己选择的机会。</p>
<p>也不知道这样是不是校园暴力给他造成的要想我，还是家庭教育造成的影响，还是自己走偏了。</p>
<p><strong>第一次正面面对传销，感受深刻，不知道到底是什么手段，会让一个人如此相信，即使和最亲近的人断绝关系也要相信这个。</strong></p>
<p><strong>我们也有想过可能会带不回来，结果虽然有点难过，但我们还是没有后悔的。</strong></p>
<p><strong>最生气的是，对于警察这一块。</strong></p>
<p><strong>警察的无作为，不在意，尤其是北旺派出所那几个民警，态度以及方法，都让人生气。</strong></p>
<p><strong>第一次体会到一个普通人在进行报案，维权的时候，作为受人民信任的警察，在面对群众举报的时候，毫不在意，真的是一颗老鼠屎坏了一锅粥。</strong></p>
<p><strong>从去廊坊时相信警察会帮忙找人，到自己这几天的经历，民警的敷衍，无作为，不在意，不追究，在去了传销窝点后，不去审问剩下的那一人，而是毫无责任感的砸掉水缸，赶走那人，但是这有什么意义呢。</strong></p>
<p><strong>电视上到处都是，警察是好人，会帮助有难的人民，连电影审查都规定警察不能是坏人，但是电视剧电影中，警察形象树立的再好又有什么用呢，亲自体验一次之后，心中的形象越好，崩塌的越厉害。还是提高下警察的责任感，努力打击坏人坏事才是最重要的。</strong></p>
<p><strong>经过这次事情，感想就是，在廊坊遇到的这些事情，导致我再也不想去那边。还有就是 相信警察都是好人，有事找警察 的这种思想，我应该已经没有了。</strong></p>
<p><strong>以上。</strong><br> <!--more--> </p>
]]></content>
      
        <categories>
            
            <category> 生活 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 生活 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[IOS 播放 android 录制的 amr 格式语音问题]]></title>
      <url>/2017/06/20/IOS%20%E6%92%AD%E6%94%BE%20android%20%E5%BD%95%E5%88%B6%E7%9A%84%20amr%20%E6%A0%BC%E5%BC%8F%E8%AF%AD%E9%9F%B3%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p>项目在接入融云进行聊天时，android 发送的语音格式为 amr 格式，IOS 发送的格式为 wav 格式。</p>
<p>在进行语音聊天时，android 发送的语音消息，本地播放没有问题。IOS 播放有杂音。</p>
<p>在确定录制的 amr 格式的源文件可以在 IOS 上播放后，大约确定为传输过程中的编码问题。<br> <a id="more"></a></p>
<p>原因是因为 android 中 MediaRecorder 的编码格式以及输出文件格式设置错误，不是设置的 AMR 格式。<br>将 MediaRecorder 的音频设置，设置为 AMR 即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// 设置所录制的声音的采样率。</div><div class="line">mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);</div><div class="line">/**设置音频文件的编码：AAC/AMR_NB/AMR_MB/Default 声音的（波形）的采样 */</div><div class="line">mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.AMR_NB);</div><div class="line">/ **</div><div class="line">  * 设置输出文件的格式：THREE_GPP/MPEG-4/RAW_AMR/Default THREE_GPP(3gp格式</div><div class="line">  * ，H263视频/ARM音频编码)、MPEG-4、RAW_AMR(只支持音频且音频编码要求为AMR_NB)</div><div class="line">  */</div><div class="line">mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);</div><div class="line">// 文件保存地址及名字</div><div class="line">targetFile = new File(targetDir, targetName);</div><div class="line">//设置输出文件的路径</div><div class="line">mMediaRecorder.setOutputFile(targetFile.getPath());</div><div class="line">// 设置录制的音频通道数</div><div class="line">mMediaRecorder.setAudioChannels(1);</div><div class="line">// 设置所录制的声音的采样率。</div><div class="line">mMediaRecorder.setAudioSamplingRate(8000);</div><div class="line">// 设置所录制的声音的编码位率。</div><div class="line">mMediaRecorder.setAudioEncodingBitRate(64);</div></pre></td></tr></table></figure>
 <!--more-->]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android 应用中实现 Cocos2dx 游戏的返回键监听]]></title>
      <url>/2017/04/26/Android%20%E5%BA%94%E7%94%A8%E4%B8%AD%E5%AE%9E%E7%8E%B0%20Cocos2dx%20%E6%B8%B8%E6%88%8F%E7%9A%84%E8%BF%94%E5%9B%9E%E9%94%AE%E7%9B%91%E5%90%AC/</url>
      <content type="html"><![CDATA[<p><span style="font-size: 12pt; font-family: 'courier new', courier, monospace;">在 Android 中实现返回键的监听，只要两种方式：</span></p>
<p><span style="font-size: 12pt; font-family: 'courier new', courier, monospace;">方式 1 ：监听返回键;</span></p>
<pre class="toolbar:2 plain:false lang:default decode:true">@Override
public void onBackPressed() {
    super.onBackPressed();
}</pre>
<span style="font-size: 12pt; font-family: 'courier new', courier, monospace;">
 <a id="more"></a>
方式 2 ：重写 keyDown() 方法，监听 KeyEvent 事件 ;</span>
<pre class="toolbar:2 plain:false lang:default decode:true ">//重写 keydown 事件
public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK) {
   if ((System.currentTimeMillis() - mkeyTime) &gt; 2000) {
            // 退出操作
        }
    }
}</pre>
<span style="font-family: 'courier new', courier, monospace; font-size: 12pt;">但是，在 Android studio 打开 Cocos2dx 游戏的 studio 版本后，无路是方式 1 还是方式 2 都无法监听到返回键的操作。</span>

<span style="font-family: 'courier new', courier, monospace; font-size: 12pt;">原因是因为在 Cocos2dx 下的  GLSurfaceView 类中，实现了  keyDown() 方法，导致事件在上层已经被处理掉了。</span>
<pre class="font-size:10 line-height:13 toolbar:2 plain:false show-plain:1 scroll:true lang:default decode:true ">GLSurfaceView.java

@Override
public boolean onKeyDown(final int pKeyCode, final KeyEvent pKeyEvent) {
    switch (pKeyCode) {
        case KeyEvent.KEYCODE_BACK:
            Cocos2dxVideoHelper.mVideoHandler.sendEmptyMessage(Cocos2dxVideoHelper.KeyEventBack);
         ....// 其他省略
        default:
            return super.onKeyDown(pKeyCode, pKeyEvent);
    }
}</pre>
<span style="font-family: 'courier new', courier, monospace;">在官方 API 中关于 keyDown() 的描述是 ：</span>
> public boolean onKeyDown (int keyCode, KeyEvent event)
> 
> 
> <span style="color: #ff0000;">**Called when a key was pressed down and not handled by any of the views inside of the activity.**</span> So, for example, key presses while the cursor is inside a TextView will not trigger the event (unless it is a navigation to another object) because TextView handles its own key presses.
> 
> 
> If the focused view didn't want this event, this method is called.
<span style="font-family: 'courier new', courier, monospace;">标记部分的文字翻译的意思是：当用户按下一个按键的时候调用，但是前提是这个事件没有被其他的任何 views 监听并处理。</span>

<span style="font-family: 'courier new', courier, monospace;">因为在 Cocos2dx 中的 GLSurfaceView 实现了 keyDown() 方法，处理了事件，所以我们的监听事件获取不到事件的返回值。</span>

<span style="font-family: 'courier new', courier, monospace;">如何让我们的监听可以获取到事件呢？很简单，只需要在 GLSurfaceView 的 keyDown() 方法中，在监听到KeyEvent.KEYCODE_BACK 时，不作处理即可(return false).</span>

<span style="font-family: 'courier new', courier, monospace;">改为如下代码 :</span>
<pre class="font:courier-new font-size:10 line-height:13 toolbar:2 plain:false lang:default decode:true">@Override
public boolean onKeyDown(final int pKeyCode, final KeyEvent pKeyEvent) {
    switch (pKeyCode) {
        case KeyEvent.KEYCODE_BACK:
            Cocos2dxVideoHelper.mVideoHandler.sendEmptyMessage(Cocos2dxVideoHelper.KeyEventBack);
            return false;
         ....// 其他省略
        default:
            return super.onKeyDown(pKeyCode, pKeyEvent);
    }
}</pre>
<span style="font-family: 'courier new', courier, monospace;">这样之后，在 Cocos2dx 下的 AppActivity 中就可以监听到返回键了，重写 keyDown() 方法。</span>
<pre class="toolbar:2 plain:false lang:default decode:true ">private long mkeyTime = 0;
/**
 * 监听Back键按下事件
 * 注意:
 * 返回值表示:是否能完全处理该事件
 * 在此处返回false,所以会继续传播该事件.
 * 在具体项目中此处的返回值视情况而定.
 */
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        if ((System.currentTimeMillis() - mkeyTime) &gt; 2000) {
            mkeyTime = System.currentTimeMillis();
            Toast.makeText(this, "再按一次确认退出", Toast.LENGTH_LONG).show();
        } else {
            finish();
        }
        return false;
    } else {
        return super.onKeyDown(keyCode, event);
    }
}</pre>

<p> 就是这样。</p>
  <!--more-->]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> cocos </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android app内接入cocos 2dx-js 所遇问题]]></title>
      <url>/2017/04/26/Android-app%E5%86%85%E6%8E%A5%E5%85%A5cocos-2dx-js-%E6%89%80%E9%81%87%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p>因项目原因，需要在应用内接入cocos2dx-js写的游戏，此前从未接触过此类需求，也不会js，特开此文，记录自己遇到的问题。（长久更新）</p>
<p>1. 使用cocos Creator 编译android 项目报错</p>
<a id="more"></a>
<p>The “android” command is deprecated.<br>For manual SDK, AVD, and project management, please use Android Studio.<br>For command-line tools, use tools/bin/sdkmanager and tools/bin/avdmanager<br>Invalid or unsupported command “update project -t android-22 -p /Users/XXXX/Documents/XXXX/build/jsb-link/frameworks/runtime-src/proj.android-studio/app”<br>Supported commands are:<br>android list target<br>android list avd<br>android list device<br>android create avd<br>android move avd<br>android delete avd<br>android list sdk<br>android update sdk<br>Error running command, return code: 2.</p>
<p>原因：是因为 sdk/tools的版本过高导致的，需要使用低版本的tools覆盖即可</p>
<p>2. 在使用第三方封装好的框架时，如果框架内加载了其他第三方库，要注意里面库的版本，因为可能库的版本太低，导致没有新版本的方法从而报错。情况：在应用内跳转cocos2dx的游戏界面时，一直报错<br>java.lang.NoSuchMethodError: No virtual method newWebSocket<br>(Lokhttp3/Request;Lokhttp3/WebSocketListener;)<br>Lokhttp3/WebSocket; in class Lokhttp3/OkHttpClient; or its super classes (declaration of ‘okhttp3.OkHttpClient’ appears in /data/app/com.quangames.a.paiju-1/split_lib_dependencies_apk.apk:classes22.dex)</p>
<p>是因为我使用的网络框架时封装好的OKGO,而OKGO中的OKHttp的版本是使用的3.4.1版，而 cocos2dx中封装的网络类需要使用3.5.0版本，版本过低导致方法不存在。</p>
<p>3. 在进入cocos2dx-js的游戏界面后，点击游戏界面中的返回键，会导致app进程被杀死。</p>
<p>// 游戏退出时，所调用的js代码<br>PaiJuAppClient.prototype.jsbEnd = function(){<br>if(DeviceUtils.isIOS()){<br>cc.director.stopAnimation();<br>jsb.reflection.callStaticMethod(“TGGameStaticController”,popVC”);<br>} else {<br>cc.director.end(); // android 调用方法<br>}<br>};<br>起初以为是 cc.director.end(); 导致应用被杀死，后改为使用反射调用本地activity 的方法</p>
<p>jsb.reflection.callStaticMethod(“../GameActivity”, “stopGameControl”,”()V”);<br>但是app还是会被杀死，后经过google搜索，发现是由于点击退出，会调用Cocos2dxHelper中的terminateProces() ，导致进程被杀死，注释掉此行代码即可。<br>然后点击退出就会反射调用本地自己写的方法</p>
<p>public static void terminateProcess() {<br>// android.os.Process.killProcess(android.os.Process.myPid());<br>}<br><!--more--></p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> cocos </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Hello world!]]></title>
      <url>/2017/03/19/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to WordPress. This is your first post. Edit or delete it, then start writing!</p>
]]></content>
      
        
        <tags>
            
            <tag> HelloWorld </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
